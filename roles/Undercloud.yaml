###############################################################################
# Role: Undercloud                                                            #
###############################################################################
- name: Undercloud
  description: |
    A role to deploy the undercloud via heat using the 'openstack undercloud
    deploy' command.
  CountDefault: 1
  tags:
    - primary
    - controller
  # Define default_route_networks as empty for undercloud where management
  # interface is used. On single nic a default route must configured in the
  # local subnet definition in undercloud.conf
  default_route_networks: []
  networks:
    External:
      subnet: external_subnet
  ServicesDefault:
    - OS::TripleO::Services::Apache
    - OS::TripleO::Services::CACerts
    - OS::TripleO::Services::ContainerImagePrepare
    - OS::TripleO::Services::ContainersLogrotateCrond
    - OS::TripleO::Services::DockerRegistry
    - OS::TripleO::Services::HAproxy
    - OS::TripleO::Services::HeatEphemeral
    - OS::TripleO::Services::UndercloudTLS
    - OS::TripleO::Services::UndercloudRemoveNovajoin
    - OS::TripleO::Services::IronicApi
    - OS::TripleO::Services::IronicConductor
    - OS::TripleO::Services::IronicInspector
    - OS::TripleO::Services::IronicNeutronAgent
    - OS::TripleO::Services::IronicPxe
    - OS::TripleO::Services::Iscsid
    - OS::TripleO::Services::Kernel
    - OS::TripleO::Services::Keystone
    - OS::TripleO::Services::LoginDefs
    - OS::TripleO::Services::MasqueradeNetworks
    - OS::TripleO::Services::Memcached
    - OS::TripleO::Services::MySQL
    - OS::TripleO::Services::MySQLClient
    - OS::TripleO::Services::NeutronApi
    - OS::TripleO::Services::NeutronCorePlugin
    - OS::TripleO::Services::NeutronDhcpAgent
    - OS::TripleO::Services::NeutronL3Agent
    - OS::TripleO::Services::NeutronOvsAgent
    - OS::TripleO::Services::OpenStackClients
    - OS::TripleO::Services::OsloMessagingNotify
    - OS::TripleO::Services::OsloMessagingRpc
    - OS::TripleO::Services::Podman
    - OS::TripleO::Services::Rear
    - OS::TripleO::Services::Rhsm
    - OS::TripleO::Services::Rsyslog
    - OS::TripleO::Services::Snmp
    - OS::TripleO::Services::Sshd
    - OS::TripleO::Services::Tempest
    - OS::TripleO::Services::Timesync
    - OS::TripleO::Services::Timezone
    - OS::TripleO::Services::Tmpwatch
    - OS::TripleO::Services::TripleoFirewall
    - OS::TripleO::Services::Tuned
    - OS::TripleO::Services::UndercloudUpgrade
    - OS::TripleO::Services::TripleoValidations
